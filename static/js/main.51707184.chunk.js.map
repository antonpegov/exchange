{"version":3,"sources":["state/models/currency.ts","state/models/exchange-mode.ts","state/models/index.ts","store.ts","shared/components/Panel.tsx","theme.ts","shared/components/Title.tsx","shared/components/Container.tsx","shared/components/ButtonsWraper.tsx","state/selectors/wallet.selectors.ts","state/selectors/exchange.selectors.ts","state/actions/exchange.actions.ts","state/actions/wallet.actions.ts","containers/exchange/Exchange.component.tsx","components/WalletRow/WalletRow.component.tsx","containers/wallet/Wallet.component.tsx","state/helpers/next-currency.helper.ts","state/helpers/to-fixed.helper.ts","state/helpers/update-amounts.helper.ts","state/reducers/exchange.reducer.ts","state/reducers/wallet.reducer.ts","utils/http.ts","api.ts","state/epics/exchange.epics.ts","state/epics/wallet.epics.ts","App.tsx","index.tsx"],"names":["Currency","ExchangeMode","history","Panel","styled","Paper","COLOR_PRIMARY","COLOR_BLUE_PRIMARY","COLOR_BLUE_SECCONDARY","WHITE","INPUT_UNDERLINE_COLOR","theme","createMuiTheme","palette","action","disabled","primary","main","overrides","MuiButton","root","fontSize","fontFamily","margin","outlinedPrimary","backgroundColor","border","color","containedPrimary","MuiTextField","display","marginBottom","MuiDialog","minWidth","MuiFab","height","position","width","zIndex","MuiInput","colorSecondary","underline","borderBottomColor","Title","h2","Container","BaseContainer","ButtonsWraper","div","getWalletState","state","wallet","getBalances","createSelector","balances","getCurrencies","currencies","getExchangeState","exchange","getMode","mode","getBaseAmount","baseAmount","getBaseCurrency","baseCurrency","getTargetAmount","targetAmount","getTargetCurrency","targetCurrency","getRate","rates","geterror","error","getErrorText","errorText","getTargets","targets","exchangeActions","init","createAction","changeMode","changeBaseCurrency","changeTargetCurrency","return","makeExchange","updateBaseAmount","updateTargetAmount","walletActions","resetBalances","runExchange","updateBalances","Wrapper","form","Rate","Amount","Balance","Error","props","visible","Direction","Fab","Selector","TextField","Exchange","dispatch","useDispatch","useSelector","rate","useState","submitButtonLabel","setSubmitButtonLabel","useEffect","word","SELL","data-testid","autoComplete","id","label","style","flexGrow","value","onChange","event","target","test","baseBalance","targetBalance","select","selected","filter","item","map","option","index","MenuItem","onClick","ArrowDownwardRounded","ArrowUpwardRounded","marginTop","Button","variant","ExchangeButton","IconButton","WalletRow","balance","currency","onExchangeClick","SyncAlt","Balances","FullWidthButton","Wallet","nextCurrency","baseCurrencyIndex","findIndex","TypeError","toFixed","Math","round","updateAmounts","isBaseAmount","newBaseAmount","newTargetAmount","match","toString","newTarget","newBase","initialExchangeState","active","EUR","USD","exchangeReducer","createReducer","handleAction","payload","base","BUY","initialBalances","GBP","PLN","initialWalletState","walletReducer","instance","Api","config","params","symbols","headers","axios","create","get","pipe","response","data","exchangeEpics","combineEpics","action$","state$","isActionOf","withLatestFrom","mapTo","push","switchMap","walletEpics","actions$","newBaseBalance","newTargetBalance","epicMiddleware","createEpicMiddleware","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createBrowserHistory","rootEpic","store","createStore","combineReducers","router","connectRouter","applyMiddleware","routerMiddleware","run","className","exact","path","component","to","ReactDOM","render","ThemeProvider","maxSnack","anchorOrigin","vertical","horizontal","document","getElementById"],"mappings":"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","file":"static/js/main.51707184.chunk.js","sourcesContent":["export enum Currency {\r\n  USD = 'USD',\r\n  EUR = 'EUR',\r\n  PLN = 'PLN',\r\n  GBP = 'GBP',\r\n}","export enum ExchangeMode {\r\n  SELL = 'Sell',\r\n  BUY = 'Buy'\r\n}","export * from './currency'\r\nexport * from './exchange-mode'\r\nexport * from './exchange-rates'\r\nexport * from './amount-update.payload'\r\nexport * from './currency-change.payload'\r\n","import { createBrowserHistory, History } from 'history'\r\nimport { connectRouter, routerMiddleware } from 'connected-react-router'\r\nimport { combineEpics, createEpicMiddleware } from 'redux-observable'\r\nimport { combineReducers, compose, createStore, applyMiddleware } from 'redux'\r\n\r\nimport { exchangeReducer } from 'state/reducers/exchange.reducer'\r\nimport { walletReducer } from 'state/reducers/wallet.reducer'\r\nimport { exchangeEpics } from 'state/epics/exchange.epics'\r\nimport { walletEpics } from 'state/epics/wallet.epics'\r\n\r\ndeclare global {  \r\n  interface Window {\r\n    __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: <R>(a: R) => R\r\n  }\r\n}\r\n\r\nexport type RootState = NonNullable<Parameters<ReturnType<typeof makeRootReducer>>[0]>\r\n\r\nconst epicMiddleware = createEpicMiddleware()\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose\r\n\r\nexport const history = createBrowserHistory();\r\n\r\nexport const rootEpic = combineEpics(\r\n  exchangeEpics,\r\n  walletEpics,\r\n)\r\n\r\nexport const makeRootReducer = (history: History) => combineReducers({\r\n  router: connectRouter(history),\r\n  wallet: walletReducer,\r\n  exchange: exchangeReducer,\r\n})\r\n\r\nexport const store = createStore(\r\n  makeRootReducer(history),\r\n  composeEnhancers(\r\n   applyMiddleware(epicMiddleware, routerMiddleware(history)),\r\n  ),\r\n)\r\n\r\nepicMiddleware.run(rootEpic)","import { Paper } from '@material-ui/core';\r\nimport styled from 'styled-components';\r\n\r\nexport const Panel = styled(Paper)`\r\n  box-shadow: 0px 2px 4px 2px lightblue !important;\r\n  margin: auto;\r\n  max-width: 400px;\r\n  min-width: 300px;\r\n  padding: 20px;\r\n`","import { createMuiTheme } from '@material-ui/core/styles'\r\n\r\nexport const COLOR_PRIMARY = '#020941'\r\nexport const COLOR_BLUE_PRIMARY = '#2699fb'\r\nexport const COLOR_BLUE_SECCONDARY = '#84c6ff'\r\nconst WHITE = 'white'\r\nconst INPUT_UNDERLINE_COLOR = COLOR_BLUE_SECCONDARY\r\n\r\nexport const theme = createMuiTheme({\r\n  palette: {\r\n    action: {\r\n      disabled: 'set color of text here',\r\n    },\r\n    primary: {\r\n      main: COLOR_PRIMARY,\r\n    },\r\n  },\r\n\r\n  overrides: {\r\n    MuiButton: {\r\n      root: {\r\n        fontSize: '1rem',\r\n        fontFamily: '\"Exo 2\", \"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\r\n        margin: '5px',\r\n      },\r\n      outlinedPrimary: {\r\n        backgroundColor: COLOR_PRIMARY,\r\n        border: `solid 2px ${COLOR_BLUE_PRIMARY}`,\r\n        color: WHITE,\r\n        '&:hover': {\r\n          backgroundColor: COLOR_PRIMARY,\r\n          border: `solid 2px ${COLOR_BLUE_SECCONDARY}`,\r\n        },\r\n      },\r\n      containedPrimary: {\r\n        // backgroundColor: 'linear-gradient(90deg, rgba(132,198,255,1) 10%,\r\n        // rgba(38,153,251,1) 100%)',\r\n        backgroundColor: COLOR_BLUE_PRIMARY,\r\n        color: WHITE,\r\n        '&:hover': {\r\n          backgroundColor: COLOR_BLUE_SECCONDARY,\r\n        },\r\n      },\r\n    },\r\n\r\n    MuiTextField: {\r\n      root: {\r\n        display: 'flex',\r\n        marginBottom: '10px',\r\n      }\r\n    },\r\n\r\n    MuiDialog: {\r\n      root: {\r\n        minWidth: '350px',\r\n      },\r\n    },\r\n\r\n    MuiFab: {\r\n      root: {\r\n        backgroundColor: 'aliceblue',\r\n        color: 'lightcoral',\r\n        height: '40px',\r\n        position: 'absolute',\r\n        width: '40px',\r\n        zIndex: 100,\r\n      }\r\n    },\r\n\r\n    MuiInput: {\r\n      colorSecondary: {\r\n        color: WHITE,\r\n      },\r\n\r\n      underline: {\r\n        borderBottomColor: INPUT_UNDERLINE_COLOR,\r\n\r\n        '&:not($disabled):after': {\r\n          borderBottomColor: INPUT_UNDERLINE_COLOR,\r\n        },\r\n\r\n        '&:hover:not($disabled):after': {\r\n          borderBottomColor: INPUT_UNDERLINE_COLOR,\r\n        },\r\n\r\n        '&:not($disabled):before': {\r\n          borderBottomColor: INPUT_UNDERLINE_COLOR,\r\n        },\r\n\r\n        '&:hover:not($disabled):before': {\r\n          borderBottomColor: INPUT_UNDERLINE_COLOR,\r\n        },\r\n      },\r\n    },\r\n  },\r\n})\r\n","import styled from 'styled-components';\r\nimport { COLOR_BLUE_PRIMARY } from 'theme';\r\n\r\nexport const Title = styled.h2`\r\n  color: ${COLOR_BLUE_PRIMARY};\r\n  font-size: 1.8em;\r\n  margin: 0;\r\n  padding-bottom: 10px;\r\n  text-align: center;\r\n`","import styled from 'styled-components';\r\nimport { Container as BaseContainer} from '@material-ui/core';\r\n\r\nexport const Container = styled(BaseContainer)`\r\n    height: 100vh;\r\n    padding-top: 10vh;\r\n`","import styled from 'styled-components';\r\n\r\nexport const ButtonsWraper = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  gap: 10px;\r\n  margin: 35px 0 5px;\r\n`\r\n","import { createSelector } from 'reselect'\r\n\r\nimport { WalletState } from 'state/reducers/wallet.reducer'\r\nimport { RootState } from 'store'\r\n\r\nconst getWalletState = (state: RootState): WalletState => state.wallet\r\n\r\nexport const getBalances = createSelector(getWalletState, (state) => state.balances)\r\nexport const getCurrencies = createSelector(getWalletState, (state) => state.currencies)","import { createSelector } from 'reselect'\r\n\r\nimport { ExchangeState } from 'state/reducers'\r\nimport { RootState } from 'store'\r\n\r\nconst getExchangeState = (state: RootState): ExchangeState => state.exchange\r\n\r\nexport const getMode = createSelector(getExchangeState, (state) => state.mode)\r\nexport const getBaseAmount = createSelector(getExchangeState, (state) => state.baseAmount)\r\nexport const getBaseCurrency = createSelector(getExchangeState, (state) => state.baseCurrency)\r\nexport const getTargetAmount = createSelector(getExchangeState, (state) => state.targetAmount)\r\nexport const getTargetCurrency = createSelector(getExchangeState, (state) => state.targetCurrency)\r\n\r\nexport const getRate = createSelector(getExchangeState, (state) => state.rates[state.targetCurrency])\r\nexport const geterror = createSelector(getExchangeState, (state) => state.error)\r\nexport const getErrorText = createSelector(getExchangeState, (state) => state.errorText)\r\nexport const getTargets = createSelector(getExchangeState, (state) => state.targets)\r\n","import { AmountUpdatePayload, Currency, ExchangeRates, CurrencyChangePayload } from 'state/models';\r\nimport { createAction } from \"typesafe-actions\";\r\n\r\nexport const exchangeActions = {\r\n  init: createAction('@exchange/init')<{ base: Currency, currencies: Currency[] }>(),\r\n  rates: createAction('@exchange/rates')<ExchangeRates>(),\r\n\r\n  changeMode: createAction('@exchange/changeMode')<void>(),\r\n  changeBaseCurrency: createAction('@exchange/changeBaseCurrency')<CurrencyChangePayload>(),\r\n  changeTargetCurrency: createAction('@exchange/changeTargetCurrency')<CurrencyChangePayload>(),\r\n  \r\n  return: createAction('@exchange/return')<void>(),\r\n  makeExchange: createAction('@exchange/makeExchange')<void>(),\r\n  \r\n  updateBaseAmount: createAction('@exchange/updateBaseAmount')<AmountUpdatePayload>(),\r\n  updateTargetAmount: createAction('@exchange/updateTargetAmount')<AmountUpdatePayload>(),\r\n}\r\n","import { createAction } from 'typesafe-actions'\r\n\r\nimport { Currency } from 'state/models'\r\n\r\nexport const walletActions = {\r\n  resetBalances: createAction('@wallet/resetBalances')<void>(),\r\n  runExchange: createAction('@wallet/runExchange')<Currency>(),\r\n  updateBalances: createAction('@wallet/updateBalances')<Record<Currency, number>>(),\r\n}\r\n","\r\n//#region Imports\r\nimport styled from 'styled-components'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { Button, Fab, MenuItem, TextField } from '@material-ui/core'\r\nimport { ArrowUpwardRounded, ArrowDownwardRounded } from '@material-ui/icons'\r\n\r\nimport { ButtonsWraper, Title } from 'shared/components'\r\n\r\nimport { getBalances, getBaseAmount, getBaseCurrency, getErrorText, geterror, getMode, getRate, getTargetAmount, getTargetCurrency, getTargets, getCurrencies } from 'state/selectors'\r\nimport { Currency, ExchangeMode } from 'state/models'\r\nimport { exchangeActions } from 'state/actions'\r\n\r\nexport const componentId = 'Exchange'\r\n//#endregion\r\n//#region Styles\r\nconst Wrapper = styled.form`\r\n  position: relative;\r\n`\r\nconst Rate = styled.div`\r\n  color: lightcoral;\r\n  display: flex;\r\n  font-weight: 600;\r\n  justify-content: center;\r\n  margin-top: -10px;\r\n`\r\nconst Amount = styled.div`\r\n  display: flex;\r\n`\r\nconst Balance = styled.div`\r\n  color: lightcoral;\r\n  display: flex;\r\n  font-size: 12px;\r\n  justify-content: flex-end;\r\n  position: relative;\r\n  right: 0px;\r\n  top: -8px;\r\n  width: 100%;\r\n`\r\nconst Error = styled.div<{visible: boolean}>` \r\n  color: red;\r\n  display: ${props => props.visible ? 'flex' : 'none'};\r\n  justify-content: center;\r\n  font-weight: 600;\r\n  font-size: 14px;\r\n  position: absolute;\r\n  width: 100%;\r\n`\r\nconst Direction = styled(Fab)`\r\n  top: 127px;\r\n  left: 175px;\r\n`\r\nconst Selector = styled(TextField)`\r\n  justify-content: flex-end;\r\n  overflow: hidden;\r\n  width: 25px;\r\n\r\n`\r\n//#endregion\r\n\r\nexport type ExchangeProps = { }\r\n\r\nexport const Exchange: React.FC<ExchangeProps> = () => {\r\n  const dispatch = useDispatch()\r\n\r\n  const balances = useSelector(getBalances)\r\n  const baseAmount = useSelector(getBaseAmount)\r\n  const baseCurrency = useSelector(getBaseCurrency)\r\n  const currencies = useSelector(getCurrencies)\r\n  const errorText = useSelector(getErrorText)\r\n  const error = useSelector(geterror)\r\n  const mode = useSelector(getMode)\r\n  const rate = useSelector(getRate)\r\n  const targets = useSelector(getTargets)\r\n  const targetAmount = useSelector(getTargetAmount)\r\n  const targetCurrency = useSelector(getTargetCurrency)\r\n\r\n  const [submitButtonLabel, setSubmitButtonLabel] = useState('')\r\n\r\n  useEffect(() => {\r\n    const word = mode === ExchangeMode.SELL ? 'for' : 'with'\r\n    \r\n    setSubmitButtonLabel(`${mode} ${baseCurrency} ${word} ${targetCurrency}`)\r\n  }, [mode, baseCurrency, targetCurrency])\r\n\r\n  const handleBaseCurrensyChange = (event: React.ChangeEvent<HTMLInputElement>): void => { \r\n    dispatch(exchangeActions.changeBaseCurrency({\r\n      selected: event.target.value as Currency,\r\n      currencies\r\n    }))\r\n  }\r\n  const handleTargetCurrensyChange  = (event: React.ChangeEvent<HTMLInputElement>): void => {\r\n    dispatch(exchangeActions.changeTargetCurrency({\r\n      selected: event.target.value as Currency,\r\n      currencies, \r\n    }))\r\n  }\r\n  const handleBaseAmountChange = (event: React.ChangeEvent<HTMLInputElement>): void => {\r\n    if (!event.target.value || /^\\d+(\\.([0-9]([0-9])?)?)?$/.test(event.target.value)) {\r\n      dispatch(exchangeActions.updateBaseAmount({\r\n        value: event.target.value, \r\n        baseBalance: balances[baseCurrency],\r\n        targetBalance: balances[targetCurrency],\r\n      }))\r\n    }\r\n  }\r\n  const handleTargetAmountChange = (event: React.ChangeEvent<HTMLInputElement>): void => {\r\n    if (!event.target.value || /^\\d+(\\.([0-9]([0-9])?)?)?$/.test(event.target.value)) {\r\n      dispatch(exchangeActions.updateTargetAmount({\r\n        value: event.target.value, \r\n        baseBalance: balances[baseCurrency],\r\n        targetBalance: balances[targetCurrency],\r\n      }))\r\n    }\r\n  }\r\n  \r\n  return (\r\n    <Wrapper data-testid={componentId} autoComplete=\"off\">\r\n      <Title data-testid=\"Title\"> {mode} {baseCurrency}</Title>\r\n\r\n      <Rate data-testid=\"Rate\"> 1 {baseCurrency} = {rate} {targetCurrency}</Rate>\r\n\r\n      <Amount>\r\n        <TextField\r\n          data-testid=\"baseAmount\"\r\n          id=\"baseAmount\"\r\n          label={baseCurrency}\r\n          style={{flexGrow: 1}}\r\n          value={baseAmount}\r\n          onChange={handleBaseAmountChange}\r\n        />\r\n\r\n        <Selector\r\n          id=\"standard-select-currency\"\r\n          select\r\n          value={''}\r\n          onChange={handleBaseCurrensyChange}\r\n        >\r\n          {targets.filter((item => item !== baseCurrency)).map((option, index) => (\r\n            <MenuItem key={index} value={option}>\r\n              {option}\r\n            </MenuItem>\r\n          ))}\r\n        </Selector>\r\n      </Amount>\r\n\r\n      <Balance>Balance: {balances[baseCurrency]} {baseCurrency}</Balance>\r\n\r\n      <Direction onClick={() => dispatch(exchangeActions.changeMode())}>\r\n        {mode === ExchangeMode.SELL \r\n          ? <ArrowDownwardRounded />\r\n          : <ArrowUpwardRounded />\r\n        }\r\n      </Direction>\r\n\r\n      <Amount>\r\n        <TextField\r\n          data-testid=\"targetAmount\"\r\n          id=\"targetAmount\"\r\n          label={targetCurrency}\r\n          value={targetAmount}\r\n          style={{flexGrow: 1, marginTop: '15px'}}\r\n          onChange={handleTargetAmountChange}\r\n        />\r\n\r\n        <Selector\r\n          id=\"standard-select-currency\"\r\n          select\r\n          value={''}\r\n          onChange={handleTargetCurrensyChange}\r\n        >\r\n          {targets.filter((item => item !== targetCurrency)).map((option, index) => (\r\n            <MenuItem key={index} value={option}>\r\n              {option}\r\n            </MenuItem>\r\n          ))}\r\n        </Selector>\r\n      </Amount>\r\n\r\n      <Balance>Balance: {balances[targetCurrency]} {targetCurrency}</Balance>\r\n\r\n      <Error visible={error}>{errorText}</Error>\r\n\r\n      <ButtonsWraper>\r\n        <Button\r\n          color=\"primary\"\r\n          data-testid=\"ReturnButton\"\r\n          onClick={() => dispatch(exchangeActions.return())}\r\n          variant=\"contained\"\r\n        >\r\n          Return\r\n        </Button>\r\n\r\n        <Button\r\n          color=\"primary\"\r\n          data-testid=\"SubmitButton\"\r\n          disabled={error}\r\n          onClick={() => dispatch(exchangeActions.makeExchange())}\r\n          style={{'flexGrow': 1}}\r\n          variant=\"contained\"\r\n        >\r\n          {submitButtonLabel}\r\n        </Button>\r\n      </ButtonsWraper>\r\n    </Wrapper>\r\n  )\r\n};\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport { SyncAlt } from '@material-ui/icons'\r\nimport { IconButton } from '@material-ui/core'\r\n\r\nimport { Currency } from 'state/models/currency'\r\n//#region Styles\r\nconst ExchangeButton = styled(IconButton)`\r\n  color: lightcoral !important;\r\n  position: relative;\r\n  top: -3px;\r\n`\r\nconst Wrapper = styled.div` \r\n  font-size: 20px;\r\n  margin: 0 10px;\r\n`\r\n//#endregion\r\nexport const componentId = 'WalletRow'\r\n\r\nexport type WalletRowProps = { \r\n  balance: number,\r\n  currency: Currency,\r\n  onExchangeClick: () => void,\r\n}\r\n\r\nexport const WalletRow: React.FC<WalletRowProps> = ({ \r\n  balance,\r\n  currency, \r\n  onExchangeClick \r\n}) => {\r\n\r\n  return (\r\n    <Wrapper data-testid={componentId}>\r\n      <ExchangeButton  data-testid=\"ExchangeButton\" onClick={onExchangeClick}>\r\n        <SyncAlt />\r\n      </ExchangeButton>\r\n\r\n      <span data-testid=\"Balance\">\r\n        <b data-testid=\"Currency\">{currency}</b> {balance}\r\n      </span>\r\n    </Wrapper>\r\n  )\r\n};","//#region Imports\r\nimport React from 'react'\r\nimport styled from 'styled-components'\r\nimport { Button } from '@material-ui/core'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\n\r\nimport { getBalances, getCurrencies } from 'state/selectors'\r\nimport { ButtonsWraper, Title } from 'shared/components'\r\nimport { walletActions } from 'state/actions/wallet.actions'\r\nimport { WalletRow } from 'components'\r\n\r\nexport const componentId = 'Wallet'\r\nexport const componentTitle = 'Balances'\r\n//#endregion\r\n//#region Styles\r\nconst Balances = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  margin-bottom: -30px;\r\n`\r\n\r\nconst FullWidthButton = styled(Button)`\r\n  width: 100%;\r\n`\r\n//#endregion\r\n\r\nexport type WalletProps = { }\r\n\r\nexport const Wallet: React.FC<WalletProps> = () => {\r\n  const dispatch = useDispatch()\r\n  const balances = useSelector(getBalances)\r\n  const currencies = useSelector(getCurrencies)\r\n\r\n  return (\r\n    <div data-testid={componentId}>\r\n      <Title data-testid=\"Title\"> {componentTitle} </Title>\r\n\r\n      <Balances data-testid=\"Balances\">\r\n        {currencies.map((currency, index) => (\r\n          <WalletRow \r\n            key={index}\r\n            balance={balances[currency]}\r\n            currency={currency}  \r\n            onExchangeClick={() => dispatch(walletActions.runExchange(currency))}\r\n          />\r\n        ))}\r\n      </Balances>\r\n\r\n      <ButtonsWraper>\r\n        <FullWidthButton\r\n          data-testid=\"ResetButton\"\r\n          onClick={() => dispatch(walletActions.resetBalances())}\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n        >\r\n          Reset balances to initial state\r\n        </FullWidthButton>\r\n      </ButtonsWraper>\r\n    </div>\r\n  )\r\n};","import { Currency } from 'state/models';\r\n\r\nexport const nextCurrency = (baseCurrency: Currency, currencies: Currency[]): Currency | void => {\r\n  const baseCurrencyIndex = currencies.findIndex((item) => item === baseCurrency);\r\n\r\n  if (baseCurrencyIndex < 0) {\r\n    throw new TypeError('Base currency is not in the list')\r\n  }\r\n\r\n  return baseCurrencyIndex === 0 ? currencies[1] : currencies[0] \r\n}\r\n","export const toFixed = (value: number | string): number => {\r\n  \r\n  return (Math.round(+value * 100)/100)\r\n}","import { toFixed } from 'state/helpers';\r\nimport { AmountUpdatePayload, ExchangeMode } from 'state/models';\r\nimport { ExchangeState } from 'state/reducers';\r\n\r\nexport const updateAmounts = (\r\n  { baseAmount, targetAmount, baseCurrency, targetCurrency, mode, rates }: ExchangeState,\r\n  { baseBalance, targetBalance, value }: AmountUpdatePayload,\r\n  isBaseAmount: boolean,\r\n): Partial<ExchangeState> => {\r\n  \r\n  let error: boolean\r\n  let newBaseAmount: string\r\n  let newTargetAmount: string\r\n  let errorText = ''\r\n  \r\n  if (value.match(/^\\d+\\.$/g)) {\r\n    error = true\r\n    newBaseAmount = isBaseAmount ? value : baseAmount\r\n    newTargetAmount = isBaseAmount ? targetAmount : value\r\n  } else if (value === '') {\r\n    error = true\r\n    newBaseAmount = ''\r\n    newTargetAmount = ''\r\n  } else {\r\n    if (isBaseAmount) { \r\n      if (mode === ExchangeMode.SELL) {\r\n        error = +value > baseBalance\r\n        errorText = `Insufficient ${baseCurrency} balance`\r\n        newBaseAmount = value\r\n        newTargetAmount = toFixed(+value * rates[targetCurrency]).toString()\r\n      } else {\r\n        const newTarget = toFixed(+value * rates[targetCurrency])\r\n\r\n        error = newTarget > targetBalance\r\n        errorText = `Insufficient ${targetCurrency} balance`\r\n        newBaseAmount = value\r\n        newTargetAmount = newTarget.toString()\r\n      }\r\n    } else {\r\n      if (mode === ExchangeMode.SELL) {\r\n        const newBase = toFixed(+value / rates[targetCurrency])\r\n\r\n        error = newBase > baseBalance\r\n        errorText = `Insufficient ${baseCurrency} balance`\r\n        newBaseAmount = newBase.toString()\r\n        newTargetAmount = value\r\n      } else {\r\n        error = +value > targetBalance\r\n        errorText = `Insufficient ${targetCurrency} balance`\r\n        newBaseAmount = toFixed(+value / rates[targetCurrency]).toString()\r\n        newTargetAmount = value\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    baseAmount: newBaseAmount,\r\n    targetAmount: newTargetAmount,\r\n    error,\r\n    errorText,\r\n  }\r\n}","import { ActionType, createReducer } from 'typesafe-actions'\r\n\r\nimport { walletActions, exchangeActions } from 'state/actions'\r\nimport { Currency, ExchangeMode } from 'state/models'\r\nimport { nextCurrency, updateAmounts } from 'state/helpers'\r\n\r\ntype Action = ActionType<typeof walletActions & typeof exchangeActions>\r\n\r\nexport type ExchangeState = {\r\n  active: boolean,\r\n  baseAmount: string,\r\n  baseCurrency: Currency,\r\n  error: boolean,\r\n  errorText: string,\r\n  mode: ExchangeMode,\r\n  rates: Record<Currency, number>,\r\n  targetAmount: string,\r\n  targetCurrency: Currency,\r\n  targets: Currency[],\r\n}\r\n\r\nexport const initialExchangeState: ExchangeState = {\r\n  active: false,\r\n  baseAmount: '',\r\n  baseCurrency: Currency.EUR,\r\n  error: true,\r\n  errorText: '',\r\n  mode: ExchangeMode.SELL,\r\n  rates: {} as Record<Currency, number>,\r\n  targetAmount: '',\r\n  targetCurrency: Currency.USD,\r\n  targets: [],\r\n}\r\n\r\nexport const exchangeReducer = createReducer<ExchangeState, Action>(\r\n  initialExchangeState\r\n)\r\n  .handleAction(exchangeActions.init, (state, { payload }) => ({\r\n    ...state,\r\n    active: true,\r\n    baseCurrency: payload.base,\r\n    targetCurrency: nextCurrency(payload.base, payload.currencies) || payload.currencies[0],\r\n    targets: payload.currencies,\r\n  }))\r\n\r\n  .handleAction(exchangeActions.return, () => initialExchangeState)\r\n\r\n  .handleAction(exchangeActions.rates, (state, { payload }) => ({\r\n    ...state,\r\n    rates: payload.rates,\r\n    baseCurrency: payload.base,\r\n  }))\r\n\r\n  .handleAction(exchangeActions.updateBaseAmount, (state, { payload }) => ({\r\n    ...state,\r\n    ...updateAmounts(state, payload, true),\r\n  }))\r\n\r\n  .handleAction(exchangeActions.updateTargetAmount, (state, { payload }) => ({\r\n    ...state,\r\n    ...updateAmounts(state, payload, false),\r\n  }))\r\n  \r\n  .handleAction(walletActions.updateBalances, (state) => ({\r\n    ...state,\r\n    baseAmount: '',\r\n    targetAmount: '',\r\n  }))\r\n\r\n  .handleAction(exchangeActions.changeMode, (state) => ({\r\n    ...state,\r\n    baseAmount: '',\r\n    error: true,\r\n    errorText: '',\r\n    mode: state.mode === ExchangeMode.BUY ? ExchangeMode.SELL : ExchangeMode.BUY,\r\n    targetAmount: '',\r\n  }))\r\n\r\n  .handleAction(exchangeActions.makeExchange, (state) => ({\r\n    ...state,\r\n    error: true,\r\n  }))\r\n\r\n  .handleAction(exchangeActions.changeBaseCurrency, (state, { payload }) => ({\r\n    ...state,\r\n    baseCurrency: payload.selected,\r\n    targetCurrency: payload.selected === state.targetCurrency \r\n      ? nextCurrency(payload.selected, payload.currencies) || payload.currencies[0]\r\n      : state.targetCurrency,\r\n    targets: payload.currencies,\r\n    baseAmount: '',\r\n    error: true,\r\n    errorText: '',\r\n    targetAmount: '',\r\n  }))\r\n\r\n  .handleAction(exchangeActions.changeTargetCurrency, (state, { payload }) => ({\r\n    ...state,\r\n    baseCurrency: payload.selected === state.baseCurrency \r\n      ? nextCurrency(payload.selected, payload.currencies) || payload.currencies[0] \r\n      : state.baseCurrency,\r\n    targetCurrency: payload.selected,\r\n    targets: payload.currencies,\r\n    baseAmount: '',\r\n    error: true,\r\n    errorText: '',\r\n    targetAmount: '',\r\n  }))\r\n","import { ActionType, createReducer } from 'typesafe-actions'\r\n\r\nimport { walletActions, exchangeActions } from 'state/actions'\r\nimport { Currency } from 'state/models'\r\n\r\ntype Action = ActionType<typeof walletActions & typeof exchangeActions>\r\n\r\nexport type WalletState = {\r\n  balances: Record<Currency, number>,\r\n  currencies: Currency[],\r\n}\r\n\r\nexport const initialBalances: Record<Currency, number> = {\r\n  [Currency.USD]: 100,\r\n  [Currency.EUR]: 200,\r\n  [Currency.GBP]: 300,\r\n  [Currency.PLN]: 400,\r\n\r\n}\r\n\r\nexport const initialWalletState: WalletState = {\r\n  balances: initialBalances,\r\n  currencies: [Currency.USD, Currency.EUR, Currency.GBP, Currency.PLN],\r\n}\r\n\r\nexport const walletReducer = createReducer<WalletState, Action>(\r\n  initialWalletState\r\n)\r\n  .handleAction(walletActions.resetBalances, (state) => ({\r\n    ...state,\r\n    balances: { ...initialBalances },\r\n  }))\r\n\r\n  .handleAction(walletActions.updateBalances, (state, { payload }) => ({\r\n    ...state,\r\n    balances: payload,\r\n  }))","import { AxiosRequestConfig, AxiosResponse } from 'axios'\r\nimport axios, { Axios } from 'axios-observable'\r\nimport { map } from 'rxjs/operators'\r\n\r\n\r\nlet instance: Axios | null = null\r\n\r\nexport interface RequestConfig extends AxiosRequestConfig {\r\n  context?: {\r\n    noBasicHeaders?: boolean\r\n  },\r\n  params: any,\r\n  headers: any,\r\n}\r\n\r\nexport const http = (): Axios => {\r\n  if (!instance) {\r\n    instance = axios.create({})\r\n  }\r\n\r\n  return instance\r\n}\r\n\r\nexport const getHTTPData = <T>() => map((response: AxiosResponse<T>) => response.data)\r\n","import { of } from 'rxjs'\r\nimport { map } from 'rxjs/operators'\r\n\r\nimport { Currency, ExchangeRates } from 'state/models'\r\n\r\nimport { getHTTPData, http, RequestConfig, mockedRates } from 'utils'\r\n\r\nconst useApiMock = false\r\n\r\nexport const Api = {\r\n  getRates(baseCurrency: Currency) {\r\n    const url = 'https://data.fixer.io/api/latest?access_key=4e8faff8b19cdd9877d40145e04b7148'\r\n    const config: RequestConfig = {\r\n      params: {\r\n        symbols: 'USD,PLN,GBP,EUR',\r\n        base: baseCurrency,\r\n      },\r\n      headers: {}\r\n    }\r\n\r\n    if (useApiMock) {\r\n      return of({ \r\n        base: mockedRates.data.base,\r\n        rates: mockedRates.data.rates,\r\n      })\r\n    }\r\n\r\n    return http()\r\n      .get<ExchangeRates>(url, config)\r\n      .pipe(\r\n        getHTTPData(),\r\n        map(({ base, rates }) => ({base, rates})),\r\n      )\r\n  },\r\n}\r\n","import { push } from 'connected-react-router'\r\nimport { Observable } from 'rxjs'\r\nimport { combineEpics, Epic } from 'redux-observable'\r\nimport { ActionType, isActionOf } from 'typesafe-actions'\r\nimport { filter, mapTo, map, switchMap, withLatestFrom } from 'rxjs/operators'\r\n\r\nimport { exchangeActions, walletActions } from 'state/actions'\r\nimport { getCurrencies } from 'state/selectors'\r\nimport { RootState } from 'store'\r\nimport { Api } from 'api'\r\n\r\ntype Actions = ActionType<typeof exchangeActions & typeof walletActions>\r\n\r\nconst initExchangePage$: Epic = (\r\n  action$: Observable<Actions>, \r\n  state$: Observable<RootState>\r\n) =>\r\n  action$.pipe(\r\n    filter(isActionOf(walletActions.runExchange)),\r\n    withLatestFrom(state$.pipe(map(state => getCurrencies(state)))),\r\n    map(([{ payload }, currencies]) => exchangeActions.init({ base: payload, currencies })),\r\n  )\r\n\r\nconst getRates$: Epic = (action$: Observable<Actions>) =>\r\n  action$.pipe(\r\n    filter(isActionOf(walletActions.runExchange)),\r\n    switchMap(({ payload }) => Api.getRates(payload).pipe(\r\n      map((data: any) => exchangeActions.rates(data))\r\n    )),\r\n  )\r\n\r\nconst closeExchangePage$: Epic = (action$: Observable<Actions>) =>\r\n  action$.pipe(\r\n    filter(isActionOf(exchangeActions.return)),\r\n    mapTo(push('/balances')),\r\n  )\r\n\r\nexport const exchangeEpics: Epic = combineEpics(\r\n  initExchangePage$,\r\n  closeExchangePage$,\r\n  getRates$,\r\n)\r\n","import { push } from 'connected-react-router'\r\nimport { Observable } from 'rxjs'\r\nimport { combineEpics, Epic } from 'redux-observable'\r\nimport { ActionType, isActionOf } from 'typesafe-actions'\r\nimport { filter, map, mapTo, withLatestFrom } from 'rxjs/operators'\r\n\r\nimport { exchangeActions, walletActions } from 'state/actions'\r\nimport { ExchangeMode } from 'state/models'\r\nimport { RootState } from 'store'\r\nimport { toFixed } from 'state/helpers'\r\n\r\ntype Actions = ActionType<typeof walletActions & typeof exchangeActions>\r\n\r\nconst openExchangeView$: Epic = (\r\n  actions$: Observable<Actions>,\r\n) =>\r\n  actions$.pipe(\r\n    filter(isActionOf(walletActions.runExchange)),\r\n    mapTo(push('/currency')),\r\n  )\r\n\r\nconst makeExchange$: Epic = (\r\n  actions$: Observable<Actions>,\r\n  state$: Observable<RootState>,\r\n) => \r\n  actions$.pipe(\r\n    filter(isActionOf(exchangeActions.makeExchange)),\r\n    withLatestFrom(\r\n      state$.pipe(map(state => state.wallet)), \r\n      state$.pipe(map(state => state.exchange))\r\n    ),\r\n    map(([, { balances },  exchange]) => {\r\n      let newBaseBalance, newTargetBalance  \r\n      \r\n      if (exchange.mode === ExchangeMode.BUY) {\r\n        newBaseBalance = toFixed(balances[exchange.baseCurrency] + +exchange.baseAmount)\r\n        newTargetBalance = toFixed(balances[exchange.targetCurrency] - +exchange.targetAmount)\r\n      } else {\r\n        newBaseBalance = toFixed(balances[exchange.baseCurrency] - +exchange.baseAmount)\r\n        newTargetBalance = toFixed(balances[exchange.targetCurrency] + +exchange.targetAmount)\r\n      }\r\n\r\n      return walletActions.updateBalances({\r\n        ...balances,\r\n        [exchange.baseCurrency]: newBaseBalance,\r\n        [exchange.targetCurrency]: newTargetBalance,\r\n      })\r\n    })\r\n  )\r\n\r\nexport const walletEpics: Epic = combineEpics(\r\n  openExchangeView$,\r\n  makeExchange$,\r\n)","import styled from 'styled-components';\nimport { Provider } from 'react-redux'\nimport { ConnectedRouter } from 'connected-react-router'\nimport { Route, Router, Redirect, Switch } from 'react-router-dom'\n\nimport { Exchange, Wallet } from 'containers';\nimport { Container, Panel } from 'shared/components';\nimport { store, history } from 'store'\n\nfunction App({className}: {className?: string}) {\n  return (\n    <div className={className}>\n      <Provider store={store}>\n        <Container>\n          <Panel>\n            <ConnectedRouter history={history}>\n              <Router history={history}>\n                <Switch>\n                  <Route exact={true} path=\"/balances\" component={Wallet} />\n                  <Route exact={true} path=\"/currency\" component={Exchange} />\n                  <Route>\n                    <Redirect to=\"/balances\" />\n                  </Route>\n                </Switch>\n              </Router>\n            </ConnectedRouter>\n          </Panel>\n        </Container>\n      </Provider>\n    </div>\n  );\n}\n\nexport default styled(App)`\n  background-color: aliceblue;\n  height: 100vh;\n`;\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { ThemeProvider } from '@material-ui/core'\nimport { SnackbarProvider } from 'notistack'\n\nimport App from 'App'\nimport { theme } from 'theme'\nimport 'index.css'\n\nReactDOM.render(\n  <ThemeProvider theme={theme}>\n    <SnackbarProvider maxSnack={5} anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}>\n      <App />\n    </SnackbarProvider>\n  </ThemeProvider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}